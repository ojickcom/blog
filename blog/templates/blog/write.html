{% extends 'base.html' %}

{% block title %}ë¸”ë¡œê·¸ ì‘ì„±{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <h1 class="mb-4">âœï¸ ìƒˆ ë¸”ë¡œê·¸ ì‘ì„±</h1>
        
        <form method="post" id="blogForm">
            {% csrf_token %}
            
            <!-- ì œëª© ë¯¸ë¦¬ë³´ê¸° -->
            <div class="title-preview" id="titlePreview">
                <strong>ğŸ“Œ ì œëª© ë¯¸ë¦¬ë³´ê¸°:</strong>
                <div id="previewText" class="mt-2 text-primary">
                    ì œëª© êµ¬ì„± ìš”ì†Œë¥¼ ì…ë ¥í•˜ë©´ ë¯¸ë¦¬ë³´ê¸°ê°€ í‘œì‹œë©ë‹ˆë‹¤
                </div>
            </div>
            
            <div class="row">
                <!-- ê¸°ë³¸ ì •ë³´ -->
                <div class="col-md-6">
                    <h5 class="mb-3">ğŸ“‹ ê¸°ë³¸ ì •ë³´</h5>
                    
                    <div class="mb-3">
                        {{ form.content.label_tag }}
                        {{ form.content }}
                        {% if form.content.errors %}
                            <div class="text-danger">{{ form.content.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="mb-3">
                        {{ form.client_type.label_tag }}
                        {{ form.client_type }}
                    </div>
                    
                    <div class="mb-3">
                        {{ form.image_url.label_tag }}
                        {{ form.image_url }}
                    </div>
                    
                    <div class="mb-3">
                        {{ form.place_name.label_tag }}
                        {{ form.place_name }}
                    </div>
                </div>
                
                <!-- ì œëª© êµ¬ì„± ìš”ì†Œ -->
                <div class="col-md-6">
                    <h5 class="mb-3">ğŸ·ï¸ ì œëª© êµ¬ì„± ìš”ì†Œ</h5>
                    
                    <div class="mb-3">
                        {{ form.content_title.label_tag }}
                        {{ form.content_title }}
                    </div>
                    
                    <div class="mb-3">
                        {{ form.content_number_character.label_tag }}
                        {{ form.content_number_character }}
                    </div>
                    
                    <div class="mb-3">
                        {{ form.content_talkstyle.label_tag }}
                        {{ form.content_talkstyle }}
                    </div>
                    
                    <div class="mb-3">
                        {{ form.content_aspect.label_tag }}
                        {{ form.content_aspect }}
                    </div>
                </div>
            </div>
            
            <div class="d-flex justify-content-between mt-4">
                <a href="{% url 'blog_list' %}" class="btn btn-secondary">
                    â¬…ï¸ ëª©ë¡ìœ¼ë¡œ
                </a>
                <button type="submit" class="btn btn-primary">
                    ğŸ’¾ ì‘ì„± ì™„ë£Œ
                </button>
            </div>
        </form>
    </div>
</div>

<script>
// ì œëª© ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥
function updateTitlePreview() {
    const contentTitle = document.querySelector('input[name="content_title"]').value || '';
    const contentNumberCharacter = document.querySelector('input[name="content_number_character"]').value || '';
    const contentTalkstyle = document.querySelector('input[name="content_talkstyle"]').value || '';
    const contentAspect = document.querySelector('input[name="content_aspect"]').value || '';
    
    const titleParts = [contentTitle, contentNumberCharacter, contentTalkstyle, contentAspect]
        .filter(part => part.trim() !== '');
    
    const previewText = titleParts.length > 0 
        ? titleParts.join(' ') 
        : 'ì œëª© êµ¬ì„± ìš”ì†Œë¥¼ ì…ë ¥í•˜ë©´ ë¯¸ë¦¬ë³´ê¸°ê°€ í‘œì‹œë©ë‹ˆë‹¤';
    
    document.getElementById('previewText').textContent = previewText;
}

// ì…ë ¥ í•„ë“œì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
document.addEventListener('DOMContentLoaded', function() {
    const titleInputs = [
        'input[name="content_title"]',
        'input[name="content_number_character"]',
        'input[name="content_talkstyle"]',
        'input[name="content_aspect"]'
    ];
    
    titleInputs.forEach(selector => {
        const input = document.querySelector(selector);
        if (input) {
            input.addEventListener('input', updateTitlePreview);
        }
    });
});
</script>
{% endblock %}
